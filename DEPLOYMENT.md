# Руководство по развертыванию

## 1. Подготовка окружения

### 1.1 Создание файла .env

Создайте файл `.env` в корневой директории проекта на основе `env.example`:

```bash
cp env.example .env
```

### 1.2 Настройка переменных окружения

Отредактируйте файл `.env` и установите необходимые значения:

```env
# API Configuration
VITE_API_BASE_URL=http://10.2.50.27:8010/api

# Debug Mode
VITE_DEBUG_MODE=false

# Tally Webhook Configuration
VITE_TALLY_WEBHOOK_URL=http://10.2.50.27:8010/api/webhook/tally
VITE_TALLY_WEBHOOK_SECRET=your-secret-key
```

**Важно:** Замените `http://10.2.50.27:8010/api` на реальный URL вашего API сервера.

## Разработка

```bash
# Запуск в режиме разработки
npm run dev

# Сборка для продакшена
npm run build

# Предварительный просмотр сборки
npm run preview
```

## Проверка API подключения

1. Откройте консоль браузера (F12)
2. Выполните тестовые запросы:

```javascript
// Импорт примеров API
import('./src/examples/api-examples.js').then(module => {
  // Тест отправки OTP
  module.exampleRequestOtp();
  
  // Тест полной аутентификации
  module.exampleFullAuth();
});
```

## Развертывание

### Vercel

1. Установите Vercel CLI:
```bash
npm i -g vercel
```

2. Разверните приложение:
```bash
vercel
```

3. Настройте переменные окружения в Vercel Dashboard:
   - `VITE_API_BASE_URL`
   - `VITE_DEBUG_MODE`

### Netlify

1. Создайте файл `netlify.toml`:
```toml
[build]
  publish = "dist"
  command = "npm run build"

[build.environment]
  VITE_API_BASE_URL = "http://10.2.50.27:8010/api"
```

2. Разверните через Netlify Dashboard или CLI.

### GitHub Pages

1. Обновите `vite.config.js`:
```javascript
export default defineConfig({
  base: '/your-repo-name/',
  // ... остальные настройки
})
```

2. Настройте GitHub Actions для автоматического развертывания.

## Проверка работоспособности

После развертывания проверьте:

1. **Отправка OTP**: Введите номер телефона и нажмите "Отправить код"
2. **Проверка OTP**: Введите полученный код
3. **Авторизация**: Успешный переход на главную страницу
4. **Обработка ошибок**: Попробуйте неверные данные

## Мониторинг

### Логи

Проверяйте консоль браузера на наличие ошибок:
- Сетевые ошибки
- Ошибки валидации
- Ошибки API

### Метрики

Отслеживайте:
- Количество успешных авторизаций
- Количество ошибок
- Время ответа API

## Устранение неполадок

### Ошибка CORS

Если получаете ошибки CORS, убедитесь что ваш API сервер настроен для работы с вашим доменом:

```javascript
// Пример настройки CORS на сервере
app.use(cors({
  origin: ['https://your-app-domain.com', 'http://localhost:5173'],
  credentials: true
}));
```

### Ошибка таймаута

Если запросы долго выполняются:
1. Проверьте скорость интернета
2. Увеличьте таймаут в конфигурации
3. Проверьте производительность API сервера

### Ошибки валидации

Если получаете ошибки валидации:
1. Проверьте формат номера телефона
2. Убедитесь что OTP код 6-значный
3. Проверьте что номер телефона узбекский

## Безопасность

1. **HTTPS**: Используйте только HTTPS в продакшене
2. **Rate Limiting**: Настройте ограничения на API сервере
3. **Валидация**: Всегда валидируйте данные на клиенте и сервере
4. **Токены**: Безопасно храните JWT токены
5. **Логи**: Не логируйте чувствительные данные

## Обновления

При обновлении API:

1. Обновите типы в `src/types/api.js`
2. Протестируйте новые endpoints
3. Обновите документацию
4. Уведомите команду о изменениях
